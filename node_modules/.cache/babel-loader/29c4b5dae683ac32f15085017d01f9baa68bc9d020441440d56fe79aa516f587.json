{"ast":null,"code":"import axios from \"axios\";\nconst authHeaders = token => {\n  const t = token || typeof localStorage !== \"undefined\" && localStorage.getItem(\"token\");\n  return t ? {\n    Authorization: `Bearer ${t}`\n  } : {};\n};\nexport const fetchReviews = async token => {\n  const res = await axios.get(\"/api/reviews\", {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const fetchUserReviews = async token => {\n  const res = await axios.get(\"/api/user-reviews\", {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const fetchUsers = async token => {\n  const res = await axios.get(\"/api/users\", {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const addReview = async (reviewData, token) => {\n  const res = await axios.post(\"/api/reviews\", reviewData, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const updateReview = async (id, reviewData, token) => {\n  const res = await axios.put(`/api/reviews/${id}`, reviewData, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const deleteReview = async (id, token) => {\n  const res = await axios.delete(`/api/reviews/${id}`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const adminDeleteReview = async (id, token) => {\n  const res = await axios.delete(`/api/admin/reviews/${id}`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const toggleFavorite = async (id, token) => {\n  const res = await axios.patch(`/api/reviews/${id}/favorite`, {}, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const login = async authForm => {\n  const res = await axios.post(\"/api/login\", authForm);\n  return res.data;\n};\nexport const register = async authForm => {\n  const res = await axios.post(\"/api/register\", authForm);\n  return res.data;\n};\nexport const uploadCover = async (file, token) => {\n  const data = new FormData();\n  data.append(\"cover\", file);\n  const res = await axios.post(\"/api/upload-cover\", data, {\n    headers: {\n      ...authHeaders(token)\n    }\n  });\n  return res.data; // { url }\n};\n\n// Profile APIs\nexport const getMe = async token => {\n  const res = await axios.get(\"/api/me\", {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const updateMe = async (updates, token) => {\n  const res = await axios.put(\"/api/me\", updates, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};\nexport const uploadAvatar = async (file, token) => {\n  const data = new FormData();\n  data.append(\"avatar\", file);\n  const res = await axios.post(\"/api/upload-avatar\", data, {\n    headers: {\n      ...authHeaders(token)\n    }\n  });\n  return res.data; // { url }\n};\nexport const changePassword = async ({\n  currentPassword,\n  newPassword\n}, token) => {\n  const res = await axios.put(\"/api/me/password\", {\n    currentPassword,\n    newPassword\n  }, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n};","map":{"version":3,"names":["axios","authHeaders","token","t","localStorage","getItem","Authorization","fetchReviews","res","get","headers","data","fetchUserReviews","fetchUsers","addReview","reviewData","post","updateReview","id","put","deleteReview","delete","adminDeleteReview","toggleFavorite","patch","login","authForm","register","uploadCover","file","FormData","append","getMe","updateMe","updates","uploadAvatar","changePassword","currentPassword","newPassword"],"sources":["C:/Users/Rehman/Desktop/book-review-app/client/src/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst authHeaders = (token) => {\r\n  const t = token || (typeof localStorage !== \"undefined\" && localStorage.getItem(\"token\"));\r\n  return t ? { Authorization: `Bearer ${t}` } : {};\r\n};\r\n\r\nexport const fetchReviews = async (token) => {\r\n  const res = await axios.get(\"/api/reviews\", {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const fetchUserReviews = async (token) => {\r\n  const res = await axios.get(\"/api/user-reviews\", {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const fetchUsers = async (token) => {\r\n  const res = await axios.get(\"/api/users\", {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const addReview = async (reviewData, token) => {\r\n  const res = await axios.post(\"/api/reviews\", reviewData, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const updateReview = async (id, reviewData, token) => {\r\n  const res = await axios.put(`/api/reviews/${id}`, reviewData, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const deleteReview = async (id, token) => {\r\n  const res = await axios.delete(`/api/reviews/${id}`, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const adminDeleteReview = async (id, token) => {\r\n  const res = await axios.delete(`/api/admin/reviews/${id}`, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const toggleFavorite = async (id, token) => {\r\n  const res = await axios.patch(\r\n    `/api/reviews/${id}/favorite`,\r\n    {},\r\n    {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    }\r\n  );\r\n  return res.data;\r\n};\r\n\r\nexport const login = async (authForm) => {\r\n  const res = await axios.post(\"/api/login\", authForm);\r\n  return res.data;\r\n};\r\n\r\nexport const register = async (authForm) => {\r\n  const res = await axios.post(\"/api/register\", authForm);\r\n  return res.data;\r\n};\r\n\r\nexport const uploadCover = async (file, token) => {\r\n  const data = new FormData();\r\n  data.append(\"cover\", file);\r\n  const res = await axios.post(\"/api/upload-cover\", data, { headers: { ...authHeaders(token) } });\r\n  return res.data; // { url }\r\n};\r\n\r\n// Profile APIs\r\nexport const getMe = async (token) => {\r\n  const res = await axios.get(\"/api/me\", {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const updateMe = async (updates, token) => {\r\n  const res = await axios.put(\"/api/me\", updates, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const uploadAvatar = async (file, token) => {\r\n  const data = new FormData();\r\n  data.append(\"avatar\", file);\r\n  const res = await axios.post(\"/api/upload-avatar\", data, { headers: { ...authHeaders(token) } });\r\n  return res.data; // { url }\r\n};\r\n\r\nexport const changePassword = async (\r\n  { currentPassword, newPassword },\r\n  token\r\n) => {\r\n  const res = await axios.put(\r\n    \"/api/me/password\",\r\n    { currentPassword, newPassword },\r\n    { headers: { Authorization: `Bearer ${token}` } }\r\n  );\r\n  return res.data;\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,WAAW,GAAIC,KAAK,IAAK;EAC7B,MAAMC,CAAC,GAAGD,KAAK,IAAK,OAAOE,YAAY,KAAK,WAAW,IAAIA,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;EACzF,OAAOF,CAAC,GAAG;IAAEG,aAAa,EAAE,UAAUH,CAAC;EAAG,CAAC,GAAG,CAAC,CAAC;AAClD,CAAC;AAED,OAAO,MAAMI,YAAY,GAAG,MAAOL,KAAK,IAAK;EAC3C,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,cAAc,EAAE;IAC1CC,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMC,gBAAgB,GAAG,MAAOV,KAAK,IAAK;EAC/C,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,mBAAmB,EAAE;IAC/CC,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAME,UAAU,GAAG,MAAOX,KAAK,IAAK;EACzC,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,YAAY,EAAE;IACxCC,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMG,SAAS,GAAG,MAAAA,CAAOC,UAAU,EAAEb,KAAK,KAAK;EACpD,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACgB,IAAI,CAAC,cAAc,EAAED,UAAU,EAAE;IACvDL,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMM,YAAY,GAAG,MAAAA,CAAOC,EAAE,EAAEH,UAAU,EAAEb,KAAK,KAAK;EAC3D,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACmB,GAAG,CAAC,gBAAgBD,EAAE,EAAE,EAAEH,UAAU,EAAE;IAC5DL,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMS,YAAY,GAAG,MAAAA,CAAOF,EAAE,EAAEhB,KAAK,KAAK;EAC/C,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACqB,MAAM,CAAC,gBAAgBH,EAAE,EAAE,EAAE;IACnDR,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMW,iBAAiB,GAAG,MAAAA,CAAOJ,EAAE,EAAEhB,KAAK,KAAK;EACpD,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACqB,MAAM,CAAC,sBAAsBH,EAAE,EAAE,EAAE;IACzDR,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMY,cAAc,GAAG,MAAAA,CAAOL,EAAE,EAAEhB,KAAK,KAAK;EACjD,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACwB,KAAK,CAC3B,gBAAgBN,EAAE,WAAW,EAC7B,CAAC,CAAC,EACF;IACER,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CACF,CAAC;EACD,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMc,KAAK,GAAG,MAAOC,QAAQ,IAAK;EACvC,MAAMlB,GAAG,GAAG,MAAMR,KAAK,CAACgB,IAAI,CAAC,YAAY,EAAEU,QAAQ,CAAC;EACpD,OAAOlB,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMgB,QAAQ,GAAG,MAAOD,QAAQ,IAAK;EAC1C,MAAMlB,GAAG,GAAG,MAAMR,KAAK,CAACgB,IAAI,CAAC,eAAe,EAAEU,QAAQ,CAAC;EACvD,OAAOlB,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMiB,WAAW,GAAG,MAAAA,CAAOC,IAAI,EAAE3B,KAAK,KAAK;EAChD,MAAMS,IAAI,GAAG,IAAImB,QAAQ,CAAC,CAAC;EAC3BnB,IAAI,CAACoB,MAAM,CAAC,OAAO,EAAEF,IAAI,CAAC;EAC1B,MAAMrB,GAAG,GAAG,MAAMR,KAAK,CAACgB,IAAI,CAAC,mBAAmB,EAAEL,IAAI,EAAE;IAAED,OAAO,EAAE;MAAE,GAAGT,WAAW,CAACC,KAAK;IAAE;EAAE,CAAC,CAAC;EAC/F,OAAOM,GAAG,CAACG,IAAI,CAAC,CAAC;AACnB,CAAC;;AAED;AACA,OAAO,MAAMqB,KAAK,GAAG,MAAO9B,KAAK,IAAK;EACpC,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,SAAS,EAAE;IACrCC,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMsB,QAAQ,GAAG,MAAAA,CAAOC,OAAO,EAAEhC,KAAK,KAAK;EAChD,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACmB,GAAG,CAAC,SAAS,EAAEe,OAAO,EAAE;IAC9CxB,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC;AAED,OAAO,MAAMwB,YAAY,GAAG,MAAAA,CAAON,IAAI,EAAE3B,KAAK,KAAK;EACjD,MAAMS,IAAI,GAAG,IAAImB,QAAQ,CAAC,CAAC;EAC3BnB,IAAI,CAACoB,MAAM,CAAC,QAAQ,EAAEF,IAAI,CAAC;EAC3B,MAAMrB,GAAG,GAAG,MAAMR,KAAK,CAACgB,IAAI,CAAC,oBAAoB,EAAEL,IAAI,EAAE;IAAED,OAAO,EAAE;MAAE,GAAGT,WAAW,CAACC,KAAK;IAAE;EAAE,CAAC,CAAC;EAChG,OAAOM,GAAG,CAACG,IAAI,CAAC,CAAC;AACnB,CAAC;AAED,OAAO,MAAMyB,cAAc,GAAG,MAAAA,CAC5B;EAAEC,eAAe;EAAEC;AAAY,CAAC,EAChCpC,KAAK,KACF;EACH,MAAMM,GAAG,GAAG,MAAMR,KAAK,CAACmB,GAAG,CACzB,kBAAkB,EAClB;IAAEkB,eAAe;IAAEC;EAAY,CAAC,EAChC;IAAE5B,OAAO,EAAE;MAAEJ,aAAa,EAAE,UAAUJ,KAAK;IAAG;EAAE,CAClD,CAAC;EACD,OAAOM,GAAG,CAACG,IAAI;AACjB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}