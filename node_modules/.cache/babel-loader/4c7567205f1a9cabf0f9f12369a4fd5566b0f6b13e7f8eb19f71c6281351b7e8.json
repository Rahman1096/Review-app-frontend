{"ast":null,"code":"import axios from\"axios\";// Configure API base URL for production (Netlify) via REACT_APP_API_URL.\n// Fallback to your Render backend if the env var is missing.\n// Example: https://review-app-backend-xoam.onrender.com\nexport const API_BASE=(process.env.REACT_APP_API_URL||\"https://review-app-backend-xoam.onrender.com\").replace(/\\/$/,\"\");export const http=axios.create({baseURL:API_BASE});// Resolve asset URLs returned by backend like \"/uploads/abc.jpg\" to absolute URLs in production\nexport function toAbsoluteUrl(url){if(!url)return url;if(/^https?:\\/\\//i.test(url))return url;if(url.startsWith(\"/\")){const base=(API_BASE===null||API_BASE===void 0?void 0:API_BASE.replace(/\\/$/,\"\"))||\"\";return base+url;}return url;}export const fetchReviews=async token=>{const res=await http.get(\"/api/reviews\",{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const fetchUserReviews=async token=>{const res=await http.get(\"/api/user-reviews\",{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const fetchUsers=async token=>{const res=await http.get(\"/api/users\",{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const addReview=async(reviewData,token)=>{const res=await http.post(\"/api/reviews\",reviewData,{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const updateReview=async(id,reviewData,token)=>{const res=await http.put(\"/api/reviews/\".concat(id),reviewData,{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const deleteReview=async(id,token)=>{const res=await http.delete(\"/api/reviews/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const toggleFavorite=async(id,token)=>{const res=await http.patch(\"/api/reviews/\".concat(id,\"/favorite\"),{},{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const login=async authForm=>{const res=await http.post(\"/api/login\",authForm);return res.data;};export const register=async authForm=>{const res=await http.post(\"/api/register\",authForm);return res.data;};export const uploadCover=async file=>{const data=new FormData();data.append(\"cover\",file);const res=await http.post(\"/api/upload-cover\",data);return res.data;// { url }\n};// Profile APIs\nexport const getMe=async token=>{const res=await http.get(\"/api/me\",{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const updateMe=async(updates,token)=>{const res=await http.put(\"/api/me\",updates,{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};export const uploadAvatar=async file=>{const data=new FormData();data.append(\"avatar\",file);const res=await http.post(\"/api/upload-avatar\",data);return res.data;// { url }\n};export const changePassword=async(_ref,token)=>{let{currentPassword,newPassword}=_ref;const res=await http.put(\"/api/me/password\",{currentPassword,newPassword},{headers:{Authorization:\"Bearer \".concat(token)}});return res.data;};// Email flows\nexport const verifyEmail=async token=>{const res=await http.get(\"/api/verify-email?token=\".concat(encodeURIComponent(token)));return res.data;};export const resetPassword=async(token,password)=>{const res=await http.post(\"/api/reset-password\",{token,password});return res.data;};","map":{"version":3,"names":["axios","API_BASE","process","env","REACT_APP_API_URL","replace","http","create","baseURL","toAbsoluteUrl","url","test","startsWith","base","fetchReviews","token","res","get","headers","Authorization","concat","data","fetchUserReviews","fetchUsers","addReview","reviewData","post","updateReview","id","put","deleteReview","delete","toggleFavorite","patch","login","authForm","register","uploadCover","file","FormData","append","getMe","updateMe","updates","uploadAvatar","changePassword","_ref","currentPassword","newPassword","verifyEmail","encodeURIComponent","resetPassword","password"],"sources":["C:/Users/Rehman/Desktop/book-review-app/client/src/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// Configure API base URL for production (Netlify) via REACT_APP_API_URL.\r\n// Fallback to your Render backend if the env var is missing.\r\n// Example: https://review-app-backend-xoam.onrender.com\r\nexport const API_BASE = (\r\n  process.env.REACT_APP_API_URL ||\r\n  \"https://review-app-backend-xoam.onrender.com\"\r\n).replace(/\\/$/, \"\");\r\n\r\nexport const http = axios.create({\r\n  baseURL: API_BASE,\r\n});\r\n\r\n// Resolve asset URLs returned by backend like \"/uploads/abc.jpg\" to absolute URLs in production\r\nexport function toAbsoluteUrl(url) {\r\n  if (!url) return url;\r\n  if (/^https?:\\/\\//i.test(url)) return url;\r\n  if (url.startsWith(\"/\")) {\r\n    const base = API_BASE?.replace(/\\/$/, \"\") || \"\";\r\n    return base + url;\r\n  }\r\n  return url;\r\n}\r\n\r\nexport const fetchReviews = async (token) => {\r\n  const res = await http.get(\"/api/reviews\", {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const fetchUserReviews = async (token) => {\r\n  const res = await http.get(\"/api/user-reviews\", {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const fetchUsers = async (token) => {\r\n  const res = await http.get(\"/api/users\", {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const addReview = async (reviewData, token) => {\r\n  const res = await http.post(\"/api/reviews\", reviewData, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const updateReview = async (id, reviewData, token) => {\r\n  const res = await http.put(`/api/reviews/${id}`, reviewData, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const deleteReview = async (id, token) => {\r\n  const res = await http.delete(`/api/reviews/${id}`, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const toggleFavorite = async (id, token) => {\r\n  const res = await http.patch(\r\n    `/api/reviews/${id}/favorite`,\r\n    {},\r\n    {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    }\r\n  );\r\n  return res.data;\r\n};\r\n\r\nexport const login = async (authForm) => {\r\n  const res = await http.post(\"/api/login\", authForm);\r\n  return res.data;\r\n};\r\n\r\nexport const register = async (authForm) => {\r\n  const res = await http.post(\"/api/register\", authForm);\r\n  return res.data;\r\n};\r\n\r\nexport const uploadCover = async (file) => {\r\n  const data = new FormData();\r\n  data.append(\"cover\", file);\r\n  const res = await http.post(\"/api/upload-cover\", data);\r\n  return res.data; // { url }\r\n};\r\n\r\n// Profile APIs\r\nexport const getMe = async (token) => {\r\n  const res = await http.get(\"/api/me\", {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const updateMe = async (updates, token) => {\r\n  const res = await http.put(\"/api/me\", updates, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const uploadAvatar = async (file) => {\r\n  const data = new FormData();\r\n  data.append(\"avatar\", file);\r\n  const res = await http.post(\"/api/upload-avatar\", data);\r\n  return res.data; // { url }\r\n};\r\n\r\nexport const changePassword = async (\r\n  { currentPassword, newPassword },\r\n  token\r\n) => {\r\n  const res = await http.put(\r\n    \"/api/me/password\",\r\n    { currentPassword, newPassword },\r\n    { headers: { Authorization: `Bearer ${token}` } }\r\n  );\r\n  return res.data;\r\n};\r\n\r\n// Email flows\r\nexport const verifyEmail = async (token) => {\r\n  const res = await http.get(\r\n    `/api/verify-email?token=${encodeURIComponent(token)}`\r\n  );\r\n  return res.data;\r\n};\r\n\r\nexport const resetPassword = async (token, password) => {\r\n  const res = await http.post(`/api/reset-password`, { token, password });\r\n  return res.data;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}